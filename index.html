 <!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ระบบแบบทดสอบ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .question label.text-green-600 {
      background-color: #e6fffa;
      border-radius: 0.25rem;
      padding: 0.25rem 0.5rem;
      display: inline-block;
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-800">

  <!-- Section: ฟอร์มกรอกชื่อ -->
  <section id="formSection" class="max-w-xl mx-auto mt-10 p-6 bg-white rounded shadow">
    <h1 class="text-xl font-bold mb-4">เข้าสู่ระบบก่อนทำแบบทดสอบ</h1>
    <input type="text" id="name" placeholder="ชื่อ" class="block w-full mb-3 p-2 border rounded" />
    <input type="text" id="lastname" placeholder="นามสกุล" class="block w-full mb-3 p-2 border rounded" />
    <input type="tel" id="tel" placeholder="เบอร์โทรศัพท์" class="block w-full mb-3 p-2 border rounded" />
    <button onclick="startQuiz()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">เริ่มทำแบบทดสอบ</button>
  </section>

  <!-- Section: แบบทดสอบ -->
  <section id="quizSection" class="max-w-2xl mx-auto mt-10 p-6 bg-white rounded shadow hidden">
    <h2 class="text-xl font-bold mb-4">แบบทดสอบ</h2>
    <div class="space-y-6">
      <!-- โจทย์ -->
      <div class="question" data-answer="ควาย">
        <p class="font-semibold">1. ซินคือตัวไร?</p>
        <label><input type="radio" name="q1" value="ควาย" class="mr-2">ควาย</label><br>
        <label><input type="radio" name="q1" value="คน" class="mr-2">คน</label><br>
        <label><input type="radio" name="q1" value="ลิง" class="mr-2">ลิง</label>
      </div>

      <div class="question" data-answer="ต้าวอ้วน">
        <p class="font-semibold">2. ฉายาเสี่ยภูมิคือ?</p>
        <label><input type="radio" name="q2" value="เจ้าพ่อมือถือ" class="mr-2">เจ้าพ่อมือถือ</label><br>
        <label><input type="radio" name="q2" value="แฟนน้องเลย" class="mr-2">แฟนน้องเนย</label><br>
        <label><input type="radio" name="q2" value="ต้าวอ้วน" class="mr-2">ต้าวอ้วน</label>
      </div>

      <div class="question" data-answer="เมย์">
        <p class="font-semibold">3. ใครชอบหนุ่มวาโร?</p>
        <label><input type="radio" name="q3" value="ภูมิ" class="mr-2">ภูมิ</label><br>
        <label><input type="radio" name="q3" value="เมย์" class="mr-2">เมย์</label><br>
        <label><input type="radio" name="q3" value="กัส" class="mr-2">กัส</label>
      </div>

      <div class="question" data-answer="ไปไกลๆกูไป">
        <p class="font-semibold">4. ถ้าเห็นกัสเดินกับแฟนเราควรพูดว่าไร?</p>
        <label><input type="radio" name="q4" value="ไปไกลๆกูไป" class="mr-2">ไปไกลๆกูไป</label><br>
        <label><input type="radio" name="q4" value="ไปด้วยดิ" class="mr-2">ไปด้วยดิ</label><br>
        <label><input type="radio" name="q4" value="ไปไหน" class="mr-2">ไปไหน</label>
      </div>

      <div class="question" data-answer="7">
        <p class="font-semibold">5. รากที่สองของ 49 คือ? (แถม)</p>
        <label><input type="radio" name="q5" value="7" class="mr-2">7</label><br>
        <label><input type="radio" name="q5" value="14" class="mr-2">14</label><br>
        <label><input type="radio" name="q5" value="6" class="mr-2">6</label>
      </div>

    </div>
    <div class="flex flex-col gap-3 mt-4">
  <button id="submitBtn" type="button" onclick="checkAnswers()" class="bg-green-500 text-white font-semibold py-2 rounded-lg hover:bg-green-600 transition">
    ส่งคำตอบ
  </button>
  
  <button id="backBtn" onclick="goToHome()" class="hidden bg-gray-500 text-white font-semibold py-2 rounded-lg hover:bg-gray-600 transition">
    ย้อนกลับหน้าแรก
  </button>
</div>
  </section>

  <!-- Modal: แสดงผล -->
  <div id="resultModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
    <div class="bg-white p-6 rounded max-w-md text-center space-y-2">
      <h3 class="text-xl font-bold">ผลการทดสอบ</h3>
      <p id="modalName"></p>
      <p id="modalTel"></p>
      <p id="modalScore"></p>
      <p id="modalStatus"></p>
      <p id="modalDate"></p>
      <button onclick="location.reload()" class="mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">ทำอีกครั้ง</button>
<!-- ปุ่มปิด Modal -->
    <button onclick="closeResultModal()" class="mt-2 bg-gray-400 text-white px-4 py-2 rounded hover:bg-red-500">
      ปิดหน้าต่างนี้
    </button>
    </div>
  </div>

  <!-- Modal: แจ้งเตือน -->
  <div id="warningModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
    <div class="bg-white p-4 rounded shadow text-center">
      <p class="mb-4">กรุณากรอกข้อมูลให้ครบถ้วน</p>
      <button onclick="document.getElementById('warningModal').classList.add('hidden')" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">ปิด</button>
    </div>
  </div>

  <script>
    let studentData = {};
    let startTime, endTime;

    function startQuiz() {
      const name = document.getElementById('name').value.trim();
      const lastName = document.getElementById('lastname').value.trim();
      const tel = document.getElementById('tel').value.trim();

      if (!name || !lastName || !tel) {
        document.getElementById('warningModal').classList.remove('hidden');
        return;
      }

      studentData = { name, lastName, tel };
      startTime = new Date(); // เริ่มจับเวลา

      document.getElementById('formSection').classList.add('hidden');
      document.getElementById('quizSection').classList.remove('hidden');
    }

    function checkAnswers() {
  let score = 0;
  const questions = document.querySelectorAll('.question');

  questions.forEach((q) => {
    q.classList.remove('border', 'border-red-500', 'border-green-500', 'rounded-md', 'p-4');
    const answer = q.getAttribute('data-answer');
    const selected = q.querySelector('input[type="radio"]:checked');

    // ล็อกทุก radio หลังส่ง
    const radios = q.querySelectorAll('input[type="radio"]');
    radios.forEach(r => r.disabled = true);

    if (selected) {
      if (selected.value === answer) {
        score++;
        q.classList.add('border', 'border-green-500', 'rounded-md', 'p-4');
      } else {
        q.classList.add('border', 'border-red-500', 'rounded-md', 'p-4');
      }
    } else {
      q.classList.add('border', 'border-red-500', 'rounded-md', 'p-4');
    }

    // แสดงคำตอบที่ถูก (เพิ่มด้านล่างคำถาม)
    const answerEl = document.createElement("p");
    answerEl.className = "text-sm text-green-600 mt-1";
    answerEl.innerText = `คำตอบที่ถูก: ${answer}`;
    q.appendChild(answerEl);
  });

  // แสดงผลคะแนน
  const date = new Date().toLocaleDateString('th-TH');
  const status = score >= 3 ? "ผ่าน" : "ไม่ผ่าน";

  document.getElementById('modalName').innerText = `ชื่อ: ${studentData.name}  ${studentData.lastName}`;
  document.getElementById('modalTel').innerText = `เบอร์โทร: ${studentData.tel}`;
  document.getElementById('modalScore').innerText = `คะแนน: ${score} / 5`;
  document.getElementById('modalStatus').innerText = `สถานะ: ${status}`;
  document.getElementById('modalDate').innerText = `วันที่สอบ: ${date}`;

  // ซ่อนปุ่มส่ง & แสดงปุ่มย้อนกลับ
  document.getElementById('submitBtn').classList.add('hidden');
  document.getElementById('backBtn').classList.remove('hidden');

  // เปิด modal ผลสอบ
  document.getElementById('resultModal').classList.remove('hidden');
}
function closeResultModal() {
  document.getElementById('resultModal').classList.add('hidden');
}
function goToHome() {
  location.reload(); // รีหน้าเพื่อกลับไปหน้าแรก
}
  </script>
</body>
</html>